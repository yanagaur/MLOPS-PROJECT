import{j as e,r as f}from"./@radix-DnFH_oo1.js";import{P as j,t as g,z as o,E as b,r as i,T as y,v as N,w as v,x as P,y as p,f as S,G as T,S as x,N as k}from"./index-Ci0nJ8EZ.js";import{c as C,L as c,g as h}from"./@react-router-APVeuk-U.js";import{S as E}from"./refresh-hfgWPeto.js";import{u as R}from"./all-pipeline-runs-query-BA3R2Sey.js";import{S as _,P as D}from"./SearchField-BzmfxS0L.js";import{C as u}from"./CopyButton-DcFHidFJ.js";import{D as F}from"./DisplayDate-DkCy54Bp.js";import{g as w,E as A}from"./ExecutionStatus-D6r6aK8J.js";import{I}from"./InlineAvatar-CA3DFMcM.js";import"./@tanstack-QbMbTrh5.js";import"./@reactflow-ytavUpwh.js";import"./url-CbAPzsmT.js";import"./dots-horizontal-C6K59vUm.js";import"./chevron-right-double-c9H46Kl8.js";import"./index-5GJ5ysEZ.js";import"./copy-CaGlDsUy.js";import"./check-circle-DOoS4yhF.js";function z({namespace:s}){return e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"h-5 w-5 fill-neutral-400"}),e.jsx("h1",{className:"text-display-xs font-semibold",children:decodeURIComponent(s)})]})})}const l=1,B=o.object({page:o.coerce.number().min(l).optional().default(l).catch(l),name:o.string().optional(),operator:o.enum(["and","or"]).optional()});function L(){const[s]=C(),{page:a,name:r,operator:t}=B.parse({page:s.get("page")||void 0,name:s.get("name")||void 0});return{page:a,name:r,logical_operator:t}}function U(){return[{id:"run",header:"Run",accessorFn:s=>{var a;return{name:s.name,id:s.id,status:(a=s.body)==null?void 0:a.status}},cell:({getValue:s})=>{const{name:a,status:r,id:t}=s();return e.jsxs("div",{className:"group/copybutton flex items-center gap-2",children:[e.jsx(b,{className:`h-5 w-5 shrink-0 ${w(r)}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{to:i.runs.detail(t),className:"flex items-center gap-1",children:e.jsx("h2",{className:"text-text-md font-semibold",children:a})}),e.jsx(y,{children:e.jsxs(N,{children:[e.jsx(v,{className:"hover:text-theme-text-brand hover:underline",children:e.jsx(A,{status:r})}),e.jsx(P,{className:"z-20 capitalize",children:r})]})}),e.jsx(u,{copyText:a})]}),e.jsxs(c,{to:i.runs.detail(t),className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-text-xs text-theme-text-secondary",children:t.split("-")[0]}),e.jsx(u,{copyText:t})]})]})]})}},{id:"stack",header:"Stack",accessorFn:s=>{var a,r,t,n;return{name:(r=(a=s.body)==null?void 0:a.stack)==null?void 0:r.name,id:(n=(t=s.body)==null?void 0:t.stack)==null?void 0:n.id}},cell:({getValue:s})=>{const{name:a,id:r}=s();return!a||!r?null:e.jsx(c,{to:i.stacks.overview,children:e.jsx(p,{rounded:!1,className:"inline-block",color:"turquoise",emphasis:"subtle",children:a})})}},{id:"repository",header:"Repository",accessorFn:s=>{var a,r,t,n,m,d;return{name:(t=(r=(a=s.body)==null?void 0:a.code_reference)==null?void 0:r.body)==null?void 0:t.code_repository.name,id:(d=(m=(n=s.body)==null?void 0:n.code_reference)==null?void 0:m.body)==null?void 0:d.code_repository.id}},cell:({getValue:s})=>{const{name:a,id:r}=s();return!a||!r?null:e.jsx("div",{children:e.jsx(p,{rounded:!1,className:"inline-block",color:"grey",emphasis:"subtle",children:a})})}},{id:"created",header:"Created at",accessorFn:s=>{var a;return(a=s.body)==null?void 0:a.created},cell:({getValue:s})=>e.jsx("p",{className:"text-text-sm text-theme-text-secondary",children:e.jsx(F,{dateString:s()})})},{id:"author",header:"Author",accessorFn:s=>{var a;return{author:(a=s.body)==null?void 0:a.user}},cell:({getValue:s})=>{const{author:a}=s();return e.jsx(I,{username:a.name})}}]}function G(){const{namespace:s}=h(),a=L(),r=U(),{data:t,refetch:n}=R({params:{pipeline_name:decodeURIComponent(s),...a,sort_by:"desc:updated"}},{throwOnError:!0});return e.jsxs("div",{className:"flex flex-col gap-5 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{searchParams:a}),e.jsxs(S,{intent:"primary",emphasis:"subtle",size:"md",onClick:()=>n(),children:[e.jsx(E,{className:"h-5 w-5 fill-theme-text-brand"}),"Refresh"]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsx("div",{className:"w-full",children:t?e.jsx(T,{columns:r,data:t.items}):e.jsx(x,{className:"h-[500px] w-full"})}),t?t.total_pages>1&&e.jsx(D,{searchParams:a,paginate:t}):e.jsx(x,{className:"h-[36px] w-[300px]"})]})]})}function ne(){const{namespace:s}=h(),{setCurrentBreadcrumbData:a}=k();return f.useEffect(()=>{s&&a({segment:"pipeline_detail",data:{name:s}})},[s]),e.jsxs("div",{children:[e.jsx(z,{namespace:s}),e.jsx(G,{})]})}export{ne as default};
